<!-- TODO: Remove dummy data to actual pictures -->
<div id="carouselExampleControls" class="carousel slide mb-4" data-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active">
      <%= image_tag "https://sites.google.com/site/cooperativadeproduccionart1/_/rsrc/1491065902070/config/customLogo.gif?revision=6", class: "d-block w-100", alt: "product.name", style: "max-height: 350px;width: auto;" %>
    </div>
    <div class="carousel-item">
      <%= image_tag "https://static.wixstatic.com/media/6354d3_0ef5a06c956143e1a1238fcff4525011~mv2.jpg/v1/fill/w_485,h_273,al_c,q_90,usm_0.66_1.00_0.01/6354d3_0ef5a06c956143e1a1238fcff4525011~mv2.webp", class: "d-block w-100", alt: "product.name", style: "max-height: 350px;width: auto;" %>
    </div>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

<!-- TODO: Remove dummy data to actual filters -->
<p class="text-right p-0 m-0">
  <%= link_to "<span class='fas fa-filter'></span> Filter".html_safe,
    "#collapseExample",
    class: "btn btn-outline-secondary",
    data: { toggle: "collapse" },
    aria: { expanded: "false", controls: "collapseExample" } %>
</p>
<div class="collapse" id="collapseExample">
  <div class="card card-body">
    <div class="row">
      <div class="col-3">
        <h5>Sort by</h5>
        <div class="list-group">
          <%= link_to "#", class: "list-group-item list-group-item-action d-flex justify-content-between align-items-center border-light" do %>
            All <span class="badge badge-primary badge-pill">14</span>
          <% end %>
          <%= link_to "#", class: "list-group-item list-group-item-action d-flex justify-content-between align-items-center border-light" do %>
            Popularity <span class="badge badge-primary badge-pill">10</span>
          <% end %>
          <%= link_to "#", class: "list-group-item list-group-item-action d-flex justify-content-between align-items-center border-light" do %>
            Average rating <span class="badge badge-primary badge-pill">5</span>
          <% end %>
          <%= link_to "#", class: "list-group-item list-group-item-action d-flex justify-content-between align-items-center border-light" do %>
            Newness <span class="badge badge-primary badge-pill">8</span>
          <% end %>
        </div>
      </div>
      <div class="col-3 m-auto">
        <h5>Price</h5>
        <div class="list-group">
          <%= link_to "#", class: "list-group-item list-group-item-action d-flex justify-content-between align-items-center border-light" do %>
            All <span class="badge badge-primary badge-pill">14</span>
          <% end %>
          <%= link_to "#", class: "list-group-item list-group-item-action d-flex justify-content-between align-items-center border-light" do %>
            $0.00 - $500.00 <span class="badge badge-primary badge-pill">10</span>
          <% end %>
          <%= link_to "#", class: "list-group-item list-group-item-action d-flex justify-content-between align-items-center border-light" do %>
            $500.00 - $1,000.00 <span class="badge badge-primary badge-pill">5</span>
          <% end %>
          <%= link_to "#", class: "list-group-item list-group-item-action d-flex justify-content-between align-items-center border-light" do %>
            $1,000.00 - $2,000.00 <span class="badge badge-primary badge-pill">8</span>
          <% end %>
          <%= link_to "#", class: "list-group-item list-group-item-action d-flex justify-content-between align-items-center border-light" do %>
            $2,000.00 and more <span class="badge badge-primary badge-pill">3</span>
          <% end %>
        </div>
      </div>
      <div class="col-3">
        <h5>Tipo</h5>
        <div class="list-group">
          <%= link_to "#", class: "list-group-item list-group-item-action d-flex justify-content-between align-items-center border-light" do %>
            All <span class="badge badge-primary badge-pill">14</span>
          <% end %>
          <%= link_to "#", class: "list-group-item list-group-item-action d-flex justify-content-between align-items-center border-light" do %>
            Blanco <span class="badge badge-primary badge-pill">10</span>
          <% end %>
          <%= link_to "#", class: "list-group-item list-group-item-action d-flex justify-content-between align-items-center border-light" do %>
            Negro <span class="badge badge-primary badge-pill">5</span>
          <% end %>
          <%= link_to "#", class: "list-group-item list-group-item-action d-flex justify-content-between align-items-center border-light" do %>
            Rojo <span class="badge badge-primary badge-pill">8</span>
          <% end %>
          <%= link_to "#", class: "list-group-item list-group-item-action d-flex justify-content-between align-items-center border-light" do %>
            Azul <span class="badge badge-primary badge-pill">8</span>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5">
  <% @products.each do |product| %>
    <div class="col">
      <div class="card border-light my-3 overflow-hidden" style="height: 100%">
        <div class="text-center" style="height: 300px" >
          <%= link_to [product.store, product], class: "hov-img0" do %>
            <% if product.images.count > 1 %>
              <div id="carouselProduct_<%= product.id %>" class="carousel slide mb-4" data-ride="carousel">
                <div class="carousel-inner">
                  <% product.images.each_with_index do |image, i| %>
                    <div class="carousel-item <%= 'active' if i === 0 %>">
                      <%= image_tag image, class: "img-fluid", alt: product.name, style: "max-height: 150%, min-height: 100%" %>
                    </div>
                  <% end %>
                </div>
                <a class="carousel-control-prev" href="#carouselProduct_<%= product.id %>" role="button" data-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselProduct_<%= product.id %>" role="button" data-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="sr-only">Next</span>
                </a>
              </div>
            <% elsif product.images.present? %>
              <%= image_tag product.images.first, class: "img-fluid", alt: product.name, style: "max-height: 150%, min-height: 100%" %>
            <% end %>
          <% end %>
        </div>
        <div class="card-body bg-white" style="height: 100%">
          <h5><%= product.name %></h5>
          <h5><%= product.images.count %></h5>
          <p class="card-text">
            <%= number_to_currency product.price, currency: @currency %>
          </p>
        </div>
      </div>
    </div>
  <% end %>
</div>
